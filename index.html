<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞ 3 –≤ —Ä—è–¥ —Å —É—Å–∏–ª–∏—Ç–µ–ª—è–º–∏ –∏ –∫—Ä–∞—Å–∏–≤–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π">
    <title>Crystal Match - –ò–≥—Ä–∞ 3 –≤ —Ä—è–¥</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #0c2461 0%, #1e3799 50%, #0c2461 100%);
            color: white;
            min-height: 100vh;
            padding: 15px;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(41, 128, 185, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(155, 89, 182, 0.3) 0%, transparent 50%);
            z-index: -1;
        }
        
        /* ===== LAYOUT ===== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        /* ===== HEADER ===== */
        .game-header {
            text-align: center;
            margin-bottom: 10px;
            width: 100%;
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .game-title {
            font-size: 2.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ff9a00, #ff0066, #00bfff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 5px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .game-subtitle {
            font-size: 1.1rem;
            color: rgba(255,255,255,0.8);
            margin-bottom: 20px;
        }
        
        /* ===== STATS PANEL ===== */
        .stats-panel {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 800px;
            margin-bottom: 15px;
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff9a00, #ff0066, #00bfff);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 5px;
            text-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        #score { color: #00ff9d; }
        #moves { color: #ffcc00; }
        #level { color: #00bfff; }
        #target { color: #ff6b9d; }
        
        /* ===== GAME BOARD ===== */
        .game-board-container {
            position: relative;
            background: rgba(0, 0, 30, 0.6);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            animation: scaleIn 0.6s ease-out;
        }
        
        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 6px;
            width: min(90vw, 500px);
            height: min(90vw, 500px);
            background: rgba(0, 0, 20, 0.8);
            border-radius: 12px;
            padding: 10px;
            position: relative;
        }
        
        /* ===== TILES ===== */
        .tile {
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.2s ease;
            animation: tileAppear 0.5s ease-out;
        }
        
        @keyframes tileAppear {
            from { 
                transform: scale(0) rotate(180deg); 
                opacity: 0; 
            }
            to { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
            }
        }
        
        .tile:hover {
            transform: scale(1.05);
            filter: brightness(1.2);
        }
        
        .tile.selected {
            transform: scale(1.1);
            z-index: 10;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 255, 100, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 255, 100, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 255, 100, 0); }
        }
        
        .tile .inner {
            width: 80%;
            height: 80%;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(20px, 4vw, 28px);
            position: relative;
            overflow: hidden;
        }
        
        .tile .inner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(
                to bottom right,
                rgba(255, 255, 255, 0.2) 0%,
                rgba(255, 255, 255, 0) 50%,
                rgba(255, 255, 255, 0.2) 100%
            );
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        /* Crystal Colors */
        .tile[data-type="1"] .inner { 
            background: linear-gradient(135deg, #ff4757, #ff6b81);
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3);
        }
        
        .tile[data-type="2"] .inner { 
            background: linear-gradient(135deg, #2ed573, #7bed9f);
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3);
        }
        
        .tile[data-type="3"] .inner { 
            background: linear-gradient(135deg, #ffa502, #ffb142);
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3);
        }
        
        .tile[data-type="4"] .inner { 
            background: linear-gradient(135deg, #3742fa, #5352ed);
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3);
        }
        
        .tile[data-type="5"] .inner { 
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3);
        }
        
        .tile[data-type="6"] .inner { 
            background: linear-gradient(135deg, #00d2d3, #54a0ff);
            box-shadow: inset 0 -2px 4px rgba(0,0,0,0.3);
        }
        
        /* Booster Styles */
        .tile[data-type="rocket-h"] .inner {
            background: linear-gradient(135deg, #ff3838, #ff6b6b);
            animation: rocketPulse 2s infinite;
        }
        
        .tile[data-type="rocket-v"] .inner {
            background: linear-gradient(135deg, #ff3838, #ff6b6b);
            animation: rocketPulse 2s infinite;
        }
        
        .tile[data-type="bomb"] .inner {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            animation: bombPulse 3s infinite;
        }
        
        .tile[data-type="hyper-bomb"] .inner {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            animation: hyperBombPulse 2s infinite;
        }
        
        .tile[data-type="lightning"] .inner {
            background: linear-gradient(135deg, #fdcb6e, #ffeaa7);
            animation: lightningSpark 1.5s infinite;
        }
        
        @keyframes rocketPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 56, 56, 0.5); }
            50% { box-shadow: 0 0 25px rgba(255, 56, 56, 0.9); }
        }
        
        @keyframes bombPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes hyperBombPulse {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes lightningSpark {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.5); }
        }
        
        /* ===== CONTROLS ===== */
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 18px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 160px;
            justify-content: center;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #6c5ce7, #a29bfe);
            color: white;
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(108, 92, 231, 0.4);
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }
        
        .btn-booster {
            background: linear-gradient(45deg, #ff7675, #fd79a8);
            color: white;
        }
        
        .btn-booster:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 118, 117, 0.4);
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* ===== BOOSTERS PANEL ===== */
        .boosters-panel {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .boosters-panel h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #ffcc00;
            font-size: 1.4rem;
        }
        
        .boosters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .booster-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid transparent;
        }
        
        .booster-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        .booster-card.active {
            background: rgba(255, 255, 255, 0.15);
            border-color: #ffcc00;
            box-shadow: 0 0 20px rgba(255, 204, 0, 0.3);
        }
        
        .booster-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .booster-rocket .booster-icon { background: linear-gradient(135deg, #ff3838, #ff6b6b); }
        .booster-bomb .booster-icon { background: linear-gradient(135deg, #6c5ce7, #a29bfe); }
        .booster-lightning .booster-icon { background: linear-gradient(135deg, #fdcb6e, #ffeaa7); }
        
        .booster-info {
            flex: 1;
        }
        
        .booster-name {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .booster-desc {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.4;
        }
        
        .booster-count {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffcc00;
        }
        
        /* ===== ANIMATIONS ===== */
        .combo-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 5rem;
            font-weight: 900;
            color: #ffcc00;
            text-shadow: 
                0 0 30px rgba(255, 204, 0, 0.8),
                0 0 60px rgba(255, 204, 0, 0.4);
            opacity: 0;
            pointer-events: none;
            z-index: 100;
        }
        
        .combo-display.show {
            animation: comboAnimation 1.2s forwards;
        }
        
        @keyframes comboAnimation {
            0% { 
                transform: translate(-50%, -50%) scale(0.3); 
                opacity: 0; 
            }
            30% { 
                transform: translate(-50%, -50%) scale(1.3); 
                opacity: 1; 
            }
            70% { 
                transform: translate(-50%, -50%) scale(1); 
                opacity: 1; 
            }
            100% { 
                transform: translate(-50%, -50%) scale(1); 
                opacity: 0; 
            }
        }
        
        .tile-removing {
            animation: removeTile 0.6s forwards;
        }
        
        @keyframes removeTile {
            0% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
            }
            50% { 
                transform: scale(1.2) rotate(180deg); 
                opacity: 0.7; 
            }
            100% { 
                transform: scale(0) rotate(360deg); 
                opacity: 0; 
            }
        }
        
        .tile-falling {
            animation: fallTile 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes fallTile {
            from { 
                transform: translateY(-100px); 
                opacity: 0; 
            }
            to { 
                transform: translateY(0); 
                opacity: 1; 
            }
        }
        
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 50;
            animation: particleFloat 1s forwards;
        }
        
        @keyframes particleFloat {
            0% { 
                transform: translate(0, 0) scale(1); 
                opacity: 1;
            }
            100% { 
                transform: translate(var(--dx), var(--dy)) scale(0); 
                opacity: 0;
            }
        }
        
        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: modalFadeIn 0.3s ease-out;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            animation: modalSlideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(-50px) scale(0.9); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }
        
        .modal-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            color: #ffcc00;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .modal-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: rgba(255,255,255,0.9);
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .close-modal:hover {
            opacity: 1;
        }
        
        /* ===== FOOTER ===== */
        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255,255,255,0.5);
            font-size: 0.9rem;
            width: 100%;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .game-title {
                font-size: 2.2rem;
            }
            
            .stats-panel {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stat-card {
                padding: 15px 10px;
            }
            
            .stat-value {
                font-size: 2rem;
            }
            
            .game-board {
                width: min(95vw, 400px);
                height: min(95vw, 400px);
                gap: 4px;
            }
            
            .controls {
                gap: 10px;
            }
            
            .btn {
                padding: 15px 20px;
                font-size: 1rem;
                min-width: 140px;
            }
            
            .boosters-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .game-title {
                font-size: 1.8rem;
            }
            
            .stats-panel {
                grid-template-columns: 1fr;
            }
            
            .game-board {
                width: 95vw;
                height: 95vw;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
        
        /* ===== TUTORIAL ===== */
        .tutorial-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #ffcc00;
            animation: tutorialPulse 1.5s infinite;
            z-index: 100;
            pointer-events: none;
        }
        
        @keyframes tutorialPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 204, 0, 0.7); }
            50% { transform: scale(1.2); box-shadow: 0 0 0 10px rgba(255, 204, 0, 0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="game-header">
            <h1 class="game-title">üíé CRYSTAL MATCH</h1>
            <p class="game-subtitle">–°–æ–±–∏—Ä–∞–π –ª–∏–Ω–∏–∏ –∏–∑ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤, —Å–æ–∑–¥–∞–≤–∞–π —É—Å–∏–ª–∏—Ç–µ–ª–∏ –∏ –ø–æ–±–µ–∂–¥–∞–π!</p>
        </header>
        
        <!-- Stats -->
        <div class="stats-panel">
            <div class="stat-card">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">–û–ß–ö–ò</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="moves">25</div>
                <div class="stat-label">–•–û–î–´</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">–£–†–û–í–ï–ù–¨</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="target">1000</div>
                <div class="stat-label">–¶–ï–õ–¨</div>
            </div>
        </div>
        
        <!-- Game Board -->
        <div class="game-board-container">
            <div class="game-board" id="gameBoard"></div>
            <div class="combo-display" id="comboDisplay"></div>
        </div>
        
        <!-- Controls -->
        <div class="controls">
            <button class="btn btn-primary" id="hintBtn">
                <i class="fas fa-lightbulb"></i> –ü–æ–¥—Å–∫–∞–∑–∫–∞
            </button>
            <button class="btn btn-secondary" id="shuffleBtn">
                <i class="fas fa-random"></i> –ü–µ—Ä–µ–º–µ—à–∞—Ç—å
            </button>
            <button class="btn btn-booster" id="useBoosterBtn" disabled>
                <i class="fas fa-magic"></i> –†–µ–∂–∏–º —É—Å–∏–ª–∏—Ç–µ–ª—è
            </button>
            <button class="btn btn-primary" id="restartBtn">
                <i class="fas fa-redo"></i> –ù–æ–≤–∞—è –∏–≥—Ä–∞
            </button>
        </div>
        
        <!-- Boosters Panel -->
        <div class="boosters-panel">
            <h3><i class="fas fa-rocket"></i> –£–°–ò–õ–ò–¢–ï–õ–ò</h3>
            <div class="boosters-grid">
                <div class="booster-card booster-rocket" data-booster="rocket">
                    <div class="booster-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="booster-info">
                        <div class="booster-name">–†–∞–∫–µ—Ç–∞</div>
                        <div class="booster-desc">4 –≤ —Ä—è–¥ - —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∏–ª–∏ —Å—Ç–æ–ª–±–µ—Ü</div>
                    </div>
                    <div class="booster-count" id="rocket-count">0</div>
                </div>
                
                <div class="booster-card booster-bomb" data-booster="bomb">
                    <div class="booster-icon">
                        <i class="fas fa-bomb"></i>
                    </div>
                    <div class="booster-info">
                        <div class="booster-name">–ë–æ–º–±–∞</div>
                        <div class="booster-desc">5 –≤ —Ä—è–¥ - –≤–∑—Ä—ã–≤–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å 3√ó3</div>
                    </div>
                    <div class="booster-count" id="bomb-count">0</div>
                </div>
                
                <div class="booster-card booster-lightning" data-booster="lightning">
                    <div class="booster-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="booster-info">
                        <div class="booster-name">–ú–æ–ª–Ω–∏—è</div>
                        <div class="booster-desc">L-—Ñ–æ—Ä–º–∞ - —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã –æ–¥–Ω–æ–≥–æ —Ü–≤–µ—Ç–∞</div>
                    </div>
                    <div class="booster-count" id="lightning-count">0</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="levelUpModal">
        <div class="modal-content">
            <button class="close-modal" onclick="hideModal('levelUpModal')">√ó</button>
            <h2 class="modal-title">üéâ –£–†–û–í–ï–ù–¨ –ü–û–í–´–®–ï–ù!</h2>
            <p class="modal-text" id="levelUpText"></p>
            <button class="btn btn-primary" onclick="hideModal('levelUpModal')">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>
    
    <div class="modal" id="gameOverModal">
        <div class="modal-content">
            <h2 class="modal-title">üèÜ –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
            <p class="modal-text" id="gameOverText"></p>
            <button class="btn btn-primary" onclick="restartGame()">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
        </div>
    </div>
    
    <div class="modal" id="tutorialModal">
        <div class="modal-content">
            <h2 class="modal-title">üéÆ –ö–ê–ö –ò–ì–†–ê–¢–¨</h2>
            <p class="modal-text">
                <strong>–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å:</strong> –°–æ–±–∏—Ä–∞–π—Ç–µ –ª–∏–Ω–∏–∏ –∏–∑ 3+ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤<br><br>
                <strong>–£—Å–∏–ª–∏—Ç–µ–ª–∏:</strong><br>
                ‚Ä¢ 4 –≤ —Ä—è–¥ = –†–∞–∫–µ—Ç–∞<br>
                ‚Ä¢ 5 –≤ —Ä—è–¥ = –ë–æ–º–±–∞<br>
                ‚Ä¢ L-—Ñ–æ—Ä–º–∞ = –ú–æ–ª–Ω–∏—è<br><br>
                <strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª, –∑–∞—Ç–µ–º –Ω–∞ —Å–æ—Å–µ–¥–Ω–∏–π –¥–ª—è –æ–±–º–µ–Ω–∞
            </p>
            <button class="btn btn-primary" onclick="startGame()">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É!</button>
        </div>
    </div>
    
    <footer class="footer">
        <p>–ò–≥—Ä–∞ "Crystal Match" | –°–æ–∑–¥–∞–Ω–æ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–ò–≥—Ä</p>
        <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –∫—Ä–∏—Å—Ç–∞–ª–ª—É –¥–ª—è –∏–≥—Ä—ã!</p>
    </footer>

    <script>
        // ===== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò–ì–†–´ =====
        const CONFIG = {
            BOARD_SIZE: 8,
            TILE_TYPES: 6, // –í—Å–µ 6 —Ç–∏–ø–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
            INITIAL_MOVES: 25,
            TARGET_SCORE: 1000,
            SCORE_MULTIPLIER: 1.5,
            
            SCORES: {
                MATCH_3: 100,
                MATCH_4: 250,
                MATCH_5: 500,
                COMBO_BONUS: 50
            },
            
            BOOSTERS: {
                ROCKET: 'rocket',
                BOMB: 'bomb',
                LIGHTNING: 'lightning',
                HYPER_BOMB: 'hyper-bomb'
            }
        };

        // ===== –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ =====
        let gameState = {
            score: 0,
            moves: CONFIG.INITIAL_MOVES,
            level: 1,
            target: CONFIG.TARGET_SCORE,
            selectedTile: null,
            board: [],
            isAnimating: false,
            gameActive: false,
            comboCount: 0,
            activeBooster: null,
            
            boosters: {
                rocket: 0,
                bomb: 0,
                lightning: 0
            }
        };

        // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
        function initGame() {
            showTutorial();
            setupEventListeners();
        }

        function startGame() {
            hideModal('tutorialModal');
            createBoard();
            renderBoard();
            updateUI();
            gameState.gameActive = true;
        }

        // ===== –°–û–ó–î–ê–ù–ò–ï –ü–û–õ–Ø =====
        function createBoard() {
            gameState.board = [];
            
            for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                gameState.board[row] = [];
                for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                    gameState.board[row][col] = getRandomTile();
                }
            }
            
            // –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –Ω–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
            while (findMatches().length > 0) {
                for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                    for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                        gameState.board[row][col] = getRandomTile();
                    }
                }
            }
        }

        function getRandomTile() {
            return Math.floor(Math.random() * CONFIG.TILE_TYPES) + 1;
        }

        // ===== –†–ï–ù–î–ï–†–ò–ù–ì –ü–û–õ–Ø =====
        function renderBoard() {
            const board = document.getElementById('gameBoard');
            board.innerHTML = '';
            
            for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                    const tileValue = gameState.board[row][col];
                    const tile = createTileElement(row, col, tileValue);
                    board.appendChild(tile);
                }
            }
        }

        function createTileElement(row, col, value) {
            const tile = document.createElement('div');
            tile.className = 'tile';
            tile.dataset.row = row;
            tile.dataset.col = col;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø–ª–∏—Ç–∫–∏
            let tileType = value;
            if (typeof value === 'string') {
                tileType = value;
            } else {
                tileType = value.toString();
            }
            
            tile.dataset.type = tileType;
            
            const inner = document.createElement('div');
            inner.className = 'inner';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É
            if (value === CONFIG.BOOSTERS.ROCKET) {
                inner.innerHTML = '<i class="fas fa-rocket"></i>';
            } else if (value === CONFIG.BOOSTERS.ROCKET + '-h') {
                inner.innerHTML = '<i class="fas fa-rocket" style="transform: rotate(90deg);"></i>';
            } else if (value === CONFIG.BOOSTERS.BOMB) {
                inner.innerHTML = '<i class="fas fa-bomb"></i>';
            } else if (value === CONFIG.BOOSTERS.HYPER_BOMB) {
                inner.innerHTML = '<i class="fas fa-atom"></i>';
            } else if (value === CONFIG.BOOSTERS.LIGHTNING) {
                inner.innerHTML = '<i class="fas fa-bolt"></i>';
            } else {
                inner.innerHTML = '<i class="fas fa-gem"></i>';
            }
            
            tile.appendChild(inner);
            tile.addEventListener('click', () => handleTileClick(row, col));
            
            return tile;
        }

        // ===== –û–ë–†–ê–ë–û–¢–ö–ê –ö–õ–ò–ö–û–í =====
        function handleTileClick(row, col) {
            if (!gameState.gameActive || gameState.isAnimating) return;
            
            // –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω —É—Å–∏–ª–∏—Ç–µ–ª—å
            if (gameState.activeBooster) {
                useBooster(row, col, gameState.activeBooster);
                return;
            }
            
            // –û–±—ã—á–Ω—ã–π –≤—ã–±–æ—Ä –ø–ª–∏—Ç–∫–∏
            if (!gameState.selectedTile) {
                selectTile(row, col);
            } else {
                const selected = gameState.selectedTile;
                if (selected.row === row && selected.col === col) {
                    clearSelection();
                } else if (areNeighbors(selected.row, selected.col, row, col)) {
                    swapTiles(selected.row, selected.col, row, col);
                } else {
                    clearSelection();
                    selectTile(row, col);
                }
            }
        }

        function selectTile(row, col) {
            clearSelection();
            gameState.selectedTile = { row, col };
            const tile = document.querySelector(`.tile[data-row="${row}"][data-col="${col}"]`);
            if (tile) tile.classList.add('selected');
        }

        function clearSelection() {
            const selected = document.querySelector('.tile.selected');
            if (selected) selected.classList.remove('selected');
            gameState.selectedTile = null;
        }

        function areNeighbors(row1, col1, row2, col2) {
            return (Math.abs(row1 - row2) === 1 && col1 === col2) ||
                   (Math.abs(col1 - col2) === 1 && row1 === row2);
        }

        // ===== –û–ë–ú–ï–ù –ü–õ–ò–¢–û–ö =====
        async function swapTiles(row1, col1, row2, col2) {
            gameState.isAnimating = true;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –æ–±–º–µ–Ω–∞
            animateSwap(row1, col1, row2, col2);
            
            // –û–±–º–µ–Ω –≤ –º–∞—Å—Å–∏–≤–µ
            [gameState.board[row1][col1], gameState.board[row2][col2]] = 
            [gameState.board[row2][col2], gameState.board[row1][col1]];
            
            await wait(300);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
            const matches = findMatches();
            if (matches.length > 0) {
                await processMatches(matches);
                gameState.moves--;
                updateUI();
                checkLevelUp();
                checkGameOver();
            } else {
                // –û—Ç–º–µ–Ω–∞ –æ–±–º–µ–Ω–∞
                await wait(300);
                animateSwap(row1, col1, row2, col2);
                [gameState.board[row1][col1], gameState.board[row2][col2]] = 
                [gameState.board[row2][col2], gameState.board[row1][col1]];
                
                gameState.moves--;
                updateUI();
                checkGameOver();
            }
            
            clearSelection();
            gameState.isAnimating = false;
        }

        function animateSwap(row1, col1, row2, col2) {
            const tile1 = document.querySelector(`.tile[data-row="${row1}"][data-col="${col1}"]`);
            const tile2 = document.querySelector(`.tile[data-row="${row2}"][data-col="${col2}"]`);
            
            if (tile1 && tile2) {
                tile1.style.transform = 'scale(0.9)';
                tile2.style.transform = 'scale(0.9)';
                
                setTimeout(() => {
                    tile1.style.transform = '';
                    tile2.style.transform = '';
                    renderBoard();
                }, 300);
            }
        }

        // ===== –ü–û–ò–°–ö –°–û–í–ü–ê–î–ï–ù–ò–ô =====
        function findMatches() {
            const matches = [];
            const checked = Array(CONFIG.BOARD_SIZE).fill().map(() => 
                Array(CONFIG.BOARD_SIZE).fill(false));
            
            // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                for (let col = 0; col < CONFIG.BOARD_SIZE - 2; col++) {
                    const tile1 = gameState.board[row][col];
                    const tile2 = gameState.board[row][col + 1];
                    const tile3 = gameState.board[row][col + 2];
                    
                    if (areTilesMatching(tile1, tile2, tile3)) {
                        let length = 3;
                        while (col + length < CONFIG.BOARD_SIZE && 
                               areTilesMatching(tile1, gameState.board[row][col + length])) {
                            length++;
                        }
                        
                        const matchTiles = [];
                        for (let i = 0; i < length; i++) {
                            if (!checked[row][col + i]) {
                                matchTiles.push({ row, col: col + i });
                                checked[row][col + i] = true;
                            }
                        }
                        
                        if (matchTiles.length > 0) {
                            matches.push({
                                tiles: matchTiles,
                                length: length,
                                horizontal: true,
                                tileType: tile1
                            });
                        }
                        
                        col += length - 1;
                    }
                }
            }
            
            // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                for (let row = 0; row < CONFIG.BOARD_SIZE - 2; row++) {
                    const tile1 = gameState.board[row][col];
                    const tile2 = gameState.board[row + 1][col];
                    const tile3 = gameState.board[row + 2][col];
                    
                    if (areTilesMatching(tile1, tile2, tile3)) {
                        let length = 3;
                        while (row + length < CONFIG.BOARD_SIZE && 
                               areTilesMatching(tile1, gameState.board[row + length][col])) {
                            length++;
                        }
                        
                        const matchTiles = [];
                        for (let i = 0; i < length; i++) {
                            if (!checked[row + i][col]) {
                                matchTiles.push({ row: row + i, col });
                                checked[row + i][col] = true;
                            }
                        }
                        
                        if (matchTiles.length > 0) {
                            matches.push({
                                tiles: matchTiles,
                                length: length,
                                horizontal: false,
                                tileType: tile1
                            });
                        }
                        
                        row += length - 1;
                    }
                }
            }
            
            return matches;
        }

        function areTilesMatching(tile1, tile2, tile3 = null) {
            if (typeof tile1 !== 'number' || typeof tile2 !== 'number') return false;
            if (tile3 !== null && typeof tile3 !== 'number') return false;
            
            if (tile3 === null) {
                return tile1 === tile2;
            }
            return tile1 === tile2 && tile2 === tile3;
        }

        // ===== –û–ë–†–ê–ë–û–¢–ö–ê –°–û–í–ü–ê–î–ï–ù–ò–ô =====
        async function processMatches(matches) {
            let totalScore = 0;
            const tilesToRemove = [];
            const createdBoosters = [];
            
            for (const match of matches) {
                // –ü–æ–¥—Å—á–µ—Ç –æ—á–∫–æ–≤
                let matchScore = 0;
                if (match.length === 4) {
                    matchScore = CONFIG.SCORES.MATCH_4;
                    // –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∫–µ—Ç—ã
                    const center = match.tiles[Math.floor(match.tiles.length / 2)];
                    createdBoosters.push({
                        row: center.row,
                        col: center.col,
                        type: match.horizontal ? CONFIG.BOOSTERS.ROCKET + '-h' : CONFIG.BOOSTERS.ROCKET
                    });
                    gameState.boosters.rocket++;
                } else if (match.length >= 5) {
                    matchScore = CONFIG.SCORES.MATCH_5;
                    // –°–æ–∑–¥–∞–Ω–∏–µ –±–æ–º–±—ã
                    const center = match.tiles[Math.floor(match.tiles.length / 2)];
                    createdBoosters.push({
                        row: center.row,
                        col: center.col,
                        type: CONFIG.BOOSTERS.BOMB
                    });
                    gameState.boosters.bomb++;
                } else {
                    matchScore = CONFIG.SCORES.MATCH_3;
                }
                
                // –ë–æ–Ω—É—Å –∑–∞ –∫–æ–º–±–æ
                matchScore += gameState.comboCount * CONFIG.SCORES.COMBO_BONUS;
                totalScore += matchScore;
                
                // –°–±–æ—Ä –ø–ª–∏—Ç–æ–∫ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
                for (const tile of match.tiles) {
                    if (!tilesToRemove.some(t => t.row === tile.row && t.col === tile.col)) {
                        tilesToRemove.push(tile);
                    }
                }
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤
            addScore(totalScore);
            gameState.comboCount++;
            
            // –ü–æ–∫–∞–∑ –∫–æ–º–±–æ
            if (gameState.comboCount > 1) {
                showCombo(`x${gameState.comboCount} –ö–û–ú–ë–û! +${totalScore}`);
            }
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∏—Ç–æ–∫
            await removeTiles(tilesToRemove);
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —É—Å–∏–ª–∏—Ç–µ–ª–µ–π
            for (const booster of createdBoosters) {
                gameState.board[booster.row][booster.col] = booster.type;
            }
            
            // –ü–∞–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–ª–∏—Ç–æ–∫
            await dropTiles();
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
            const newMatches = findMatches();
            if (newMatches.length > 0) {
                await processMatches(newMatches);
            } else {
                gameState.comboCount = 0;
            }
            
            updateUI();
        }

        async function removeTiles(tiles) {
            const promises = [];
            
            for (const tile of tiles) {
                const element = document.querySelector(
                    `.tile[data-row="${tile.row}"][data-col="${tile.col}"]`
                );
                
                if (element) {
                    element.classList.add('tile-removing');
                    promises.push(createParticles(tile.row, tile.col, element));
                    
                    // –û—á–∏—Å—Ç–∫–∞ —è—á–µ–π–∫–∏
                    gameState.board[tile.row][tile.col] = null;
                }
            }
            
            await Promise.all(promises);
            await wait(300);
        }

        async function dropTiles() {
            let moved = false;
            
            // –ü–∞–¥–µ–Ω–∏–µ –≤–Ω–∏–∑
            for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                let emptySpaces = 0;
                
                for (let row = CONFIG.BOARD_SIZE - 1; row >= 0; row--) {
                    if (gameState.board[row][col] === null) {
                        emptySpaces++;
                    } else if (emptySpaces > 0) {
                        gameState.board[row + emptySpaces][col] = gameState.board[row][col];
                        gameState.board[row][col] = null;
                        moved = true;
                    }
                }
                
                // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É
                for (let row = 0; row < emptySpaces; row++) {
                    gameState.board[row][col] = getRandomTile();
                }
            }
            
            if (moved) {
                renderBoard();
                await wait(100);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞–¥–µ–Ω–∏—è
                const tiles = document.querySelectorAll('.tile');
                tiles.forEach(tile => {
                    tile.classList.add('tile-falling');
                });
                
                await wait(400);
                
                tiles.forEach(tile => {
                    tile.classList.remove('tile-falling');
                });
            }
        }

        // ===== –£–°–ò–õ–ò–¢–ï–õ–ò =====
        function selectBooster(boosterType) {
            if (gameState.boosters[boosterType] > 0) {
                gameState.activeBooster = boosterType;
                document.querySelectorAll('.booster-card').forEach(card => {
                    card.classList.remove('active');
                });
                document.querySelector(`.booster-card[data-booster="${boosterType}"]`).classList.add('active');
                
                document.getElementById('useBoosterBtn').disabled = false;
                document.getElementById('useBoosterBtn').innerHTML = 
                    `<i class="fas fa-magic"></i> ${getBoosterName(boosterType)}`;
            }
        }

        function useBooster(row, col, boosterType) {
            if (gameState.boosters[boosterType] <= 0) return;
            
            gameState.boosters[boosterType]--;
            gameState.activeBooster = null;
            gameState.moves--;
            
            const tilesToRemove = [];
            
            switch(boosterType) {
                case 'rocket':
                    // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –∏ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏–∏
                    for (let i = 0; i < CONFIG.BOARD_SIZE; i++) {
                        if (i !== col) tilesToRemove.push({ row, col: i });
                        if (i !== row) tilesToRemove.push({ row: i, col });
                    }
                    break;
                    
                case 'bomb':
                    // –û–±–ª–∞—Å—Ç—å 3x3
                    for (let r = Math.max(0, row-1); r <= Math.min(CONFIG.BOARD_SIZE-1, row+1); r++) {
                        for (let c = Math.max(0, col-1); c <= Math.min(CONFIG.BOARD_SIZE-1, col+1); c++) {
                            tilesToRemove.push({ row: r, col: c });
                        }
                    }
                    break;
                    
                case 'lightning':
                    // –í—Å–µ –∫—Ä–∏—Å—Ç–∞–ª–ª—ã —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞
                    const targetType = typeof gameState.board[row][col] === 'number' 
                        ? gameState.board[row][col] 
                        : getRandomTile();
                    
                    for (let r = 0; r < CONFIG.BOARD_SIZE; r++) {
                        for (let c = 0; c < CONFIG.BOARD_SIZE; c++) {
                            if (gameState.board[r][c] === targetType) {
                                tilesToRemove.push({ row: r, col: c });
                            }
                        }
                    }
                    break;
            }
            
            // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —É—Å–∏–ª–∏—Ç–µ–ª—è
            removeTiles(tilesToRemove).then(() => {
                dropTiles().then(() => {
                    updateUI();
                    checkGameOver();
                    
                    document.querySelectorAll('.booster-card').forEach(card => {
                        card.classList.remove('active');
                    });
                    document.getElementById('useBoosterBtn').disabled = true;
                    document.getElementById('useBoosterBtn').innerHTML = 
                        '<i class="fas fa-magic"></i> –†–µ–∂–∏–º —É—Å–∏–ª–∏—Ç–µ–ª—è';
                });
            });
            
            addScore(200);
        }

        function getBoosterName(type) {
            const names = {
                rocket: '–†–∞–∫–µ—Ç–∞',
                bomb: '–ë–æ–º–±–∞',
                lightning: '–ú–æ–ª–Ω–∏—è'
            };
            return names[type] || type;
        }

        // ===== –ò–ù–¢–ï–†–§–ï–ô–° =====
        function updateUI() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('moves').textContent = gameState.moves;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('target').textContent = gameState.target;
            
            document.getElementById('rocket-count').textContent = gameState.boosters.rocket;
            document.getElementById('bomb-count').textContent = gameState.boosters.bomb;
            document.getElementById('lightning-count').textContent = gameState.boosters.lightning;
            
            const hasBoosters = gameState.boosters.rocket > 0 || 
                              gameState.boosters.bomb > 0 || 
                              gameState.boosters.lightning > 0;
            document.getElementById('useBoosterBtn').disabled = !hasBoosters;
        }

        function addScore(points) {
            gameState.score += points;
            // –ê–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞
            const scoreElement = document.getElementById('score');
            scoreElement.style.transform = 'scale(1.2)';
            setTimeout(() => {
                scoreElement.style.transform = 'scale(1)';
            }, 300);
        }

        function showCombo(text) {
            const comboDisplay = document.getElementById('comboDisplay');
            comboDisplay.textContent = text;
            comboDisplay.classList.add('show');
            
            setTimeout(() => {
                comboDisplay.classList.remove('show');
            }, 1200);
        }

        // ===== –ü–†–û–í–ï–†–ö–ê –£–†–û–í–ù–ï–ô =====
        function checkLevelUp() {
            if (gameState.score >= gameState.target) {
                gameState.level++;
                gameState.target = Math.floor(CONFIG.TARGET_SCORE * Math.pow(CONFIG.SCORE_MULTIPLIER, gameState.level - 1));
                gameState.moves += 10;
                
                const modal = document.getElementById('levelUpModal');
                const text = document.getElementById('levelUpText');
                text.textContent = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ${gameState.level}!\n\n+10 –±–æ–Ω—É—Å–Ω—ã—Ö —Ö–æ–¥–æ–≤!\n–ù–æ–≤–∞—è —Ü–µ–ª—å: ${gameState.target} –æ—á–∫–æ–≤`;
                
                showModal('levelUpModal');
                updateUI();
            }
        }

        function checkGameOver() {
            if (gameState.moves <= 0) {
                setTimeout(() => {
                    endGame();
                }, 1000);
            }
        }

        function endGame() {
            gameState.gameActive = false;
            const modal = document.getElementById('gameOverModal');
            const text = document.getElementById('gameOverText');
            
            const success = gameState.score >= gameState.target;
            if (success) {
                text.textContent = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–∏!\n\n–ò—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç: ${gameState.score}\n–£—Ä–æ–≤–µ–Ω—å: ${gameState.level}`;
            } else {
                text.textContent = `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!\n\n–ò—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç: ${gameState.score}\n–£—Ä–æ–≤–µ–Ω—å: ${gameState.level}\n–¶–µ–ª—å: ${gameState.target} –æ—á–∫–æ–≤`;
            }
            
            showModal('gameOverModal');
        }

        // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function createParticles(row, col, element) {
            return new Promise(resolve => {
                const rect = element.getBoundingClientRect();
                const boardRect = document.getElementById('gameBoard').getBoundingClientRect();
                
                const centerX = rect.left + rect.width / 2 - boardRect.left;
                const centerY = rect.top + rect.height / 2 - boardRect.top;
                
                const color = getTileColor(element.dataset.type);
                const count = 8;
                
                for (let i = 0; i < count; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.backgroundColor = color;
                    particle.style.left = `${centerX}px`;
                    particle.style.top = `${centerY}px`;
                    
                    const angle = (i * 360 / count) * (Math.PI / 180);
                    const distance = 50 + Math.random() * 50;
                    const dx = Math.cos(angle) * distance;
                    const dy = Math.sin(angle) * distance;
                    
                    particle.style.setProperty('--dx', `${dx}px`);
                    particle.style.setProperty('--dy', `${dy}px`);
                    
                    document.getElementById('gameBoard').appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 1000);
                }
                
                setTimeout(resolve, 700);
            });
        }

        function getTileColor(type) {
            const colors = {
                '1': '#ff4757',
                '2': '#2ed573',
                '3': '#ffa502',
                '4': '#3742fa',
                '5': '#9b59b6',
                '6': '#00d2d3'
            };
            return colors[type] || '#ffffff';
        }

        // ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê =====
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('show');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('show');
        }

        function showTutorial() {
            showModal('tutorialModal');
        }

        // ===== –£–ü–†–ê–í–õ–ï–ù–ò–ï =====
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            document.getElementById('hintBtn').addEventListener('click', showHint);
            document.getElementById('shuffleBtn').addEventListener('click', shuffleBoard);
            document.getElementById('useBoosterBtn').addEventListener('click', activateBoosterMode);
            document.getElementById('restartBtn').addEventListener('click', restartGame);
            
            // –£—Å–∏–ª–∏—Ç–µ–ª–∏
            document.querySelectorAll('.booster-card').forEach(card => {
                card.addEventListener('click', function() {
                    const boosterType = this.dataset.booster;
                    selectBooster(boosterType);
                });
            });
        }

        function showHint() {
            const move = findPossibleMove();
            if (move) {
                const { row1, col1, row2, col2 } = move;
                
                const tile1 = document.querySelector(`.tile[data-row="${row1}"][data-col="${col1}"]`);
                const tile2 = document.querySelector(`.tile[data-row="${row2}"][data-col="${col2}"]`);
                
                if (tile1 && tile2) {
                    tile1.style.boxShadow = '0 0 20px #00ff00';
                    tile2.style.boxShadow = '0 0 20px #00ff00';
                    
                    setTimeout(() => {
                        tile1.style.boxShadow = '';
                        tile2.style.boxShadow = '';
                    }, 2000);
                }
            } else {
                alert('–í–æ–∑–º–æ–∂–Ω—ã—Ö —Ö–æ–¥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–º–µ—à–∞—Ç—å –ø–æ–ª–µ.');
            }
        }

        function findPossibleMove() {
            // –í—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ —Ö–æ–¥–∞
            for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                for (let col = 0; col < CONFIG.BOARD_SIZE - 1; col++) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –æ–±–º–µ–Ω
                    const temp = gameState.board[row][col];
                    gameState.board[row][col] = gameState.board[row][col + 1];
                    gameState.board[row][col + 1] = temp;
                    
                    const matches = findMatches();
                    
                    gameState.board[row][col + 1] = gameState.board[row][col];
                    gameState.board[row][col] = temp;
                    
                    if (matches.length > 0) {
                        return { row1: row, col1: col, row2: row, col2: col + 1 };
                    }
                }
            }
            
            for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                for (let row = 0; row < CONFIG.BOARD_SIZE - 1; row++) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –æ–±–º–µ–Ω
                    const temp = gameState.board[row][col];
                    gameState.board[row][col] = gameState.board[row + 1][col];
                    gameState.board[row + 1][col] = temp;
                    
                    const matches = findMatches();
                    
                    gameState.board[row + 1][col] = gameState.board[row][col];
                    gameState.board[row][col] = temp;
                    
                    if (matches.length > 0) {
                        return { row1: row, col1: col, row2: row + 1, col2: col };
                    }
                }
            }
            
            return null;
        }

        function shuffleBoard() {
            if (!gameState.gameActive || gameState.isAnimating) return;
            
            if (gameState.moves > 0) {
                gameState.moves = Math.max(0, gameState.moves - 3);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —É—Å–∏–ª–∏—Ç–µ–ª–∏
                const boosters = [];
                for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                    for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                        if (typeof gameState.board[row][col] === 'string') {
                            boosters.push({
                                row: row,
                                col: col,
                                type: gameState.board[row][col]
                            });
                        }
                    }
                }
                
                // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º
                do {
                    for (let row = 0; row < CONFIG.BOARD_SIZE; row++) {
                        for (let col = 0; col < CONFIG.BOARD_SIZE; col++) {
                            gameState.board[row][col] = getRandomTile();
                        }
                    }
                    
                    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Å–∏–ª–∏—Ç–µ–ª–∏
                    for (const booster of boosters) {
                        gameState.board[booster.row][booster.col] = booster.type;
                    }
                } while (findMatches().length > 0);
                
                renderBoard();
                updateUI();
                checkGameOver();
            } else {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ö–æ–¥–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è!');
            }
        }

        function activateBoosterMode() {
            if (!gameState.activeBooster) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å–∏–ª–∏—Ç–µ–ª—å –≤ –ø–∞–Ω–µ–ª–∏ —Å–ª–µ–≤–∞');
            } else {
                alert(`–í—ã–±—Ä–∞–Ω —É—Å–∏–ª–∏—Ç–µ–ª—å: ${getBoosterName(gameState.activeBooster)}\n–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫—Ä–∏—Å—Ç–∞–ª–ª –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏`);
            }
        }

        function restartGame() {
            if (confirm('–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É? –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω.')) {
                gameState = {
                    score: 0,
                    moves: CONFIG.INITIAL_MOVES,
                    level: 1,
                    target: CONFIG.TARGET_SCORE,
                    selectedTile: null,
                    board: [],
                    isAnimating: false,
                    gameActive: true,
                    comboCount: 0,
                    activeBooster: null,
                    boosters: {
                        rocket: 0,
                        bomb: 0,
                        lightning: 0
                    }
                };
                
                createBoard();
                renderBoard();
                updateUI();
                hideModal('gameOverModal');
                hideModal('levelUpModal');
            }
        }

        // ===== –ó–ê–ü–£–°–ö –ò–ì–†–´ =====
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>